#!/usr/bin/env python3
# -*- coding: utf-8 -*-
"""
Script pour cr√©er les pages WordPress pour le syst√®me Video Library Protect
"""

import os
from datetime import datetime

def create_page_file(filename, title, content, description=""):
    """Cr√©er un fichier de page WordPress"""
    
    # Template de base pour une page WordPress
    page_template = f'''<?php
/**
 * Page: {title}
 * Description: {description}
 * 
 * Generated by Video Library Protect page creator
 * Date: {datetime.now().strftime("%Y-%m-%d %H:%M:%S")}
 */

// Prevent direct access
if (!defined('ABSPATH')) {{
    exit;
}}

/**
 * {title}
 * 
 * Cette page fait partie du syst√®me Video Library Protect
 * et utilise les shortcodes et fonctionnalit√©s du plugin.
 */

// Page Header
get_header(); ?>

<div class="vlp-page-wrapper">
    <div class="container">
        <main class="vlp-main-content">
            
            <header class="vlp-page-header">
                <h1 class="vlp-page-title">{title}</h1>
                <?php if (!empty("{description}")): ?>
                <p class="vlp-page-description">{description}</p>
                <?php endif; ?>
            </header>

            <div class="vlp-page-content">
{content}
            </div>

        </main>
    </div>
</div>

<style>
.vlp-page-wrapper {{
    padding: 40px 0;
    background: #f8f9fa;
    min-height: 70vh;
}}

.vlp-page-header {{
    text-align: center;
    margin-bottom: 40px;
    padding: 30px 0;
    background: white;
    border-radius: 8px;
    box-shadow: 0 2px 10px rgba(0,0,0,0.1);
}}

.vlp-page-title {{
    color: #2c3e50;
    font-size: 2.5em;
    margin-bottom: 15px;
    font-weight: 600;
}}

.vlp-page-description {{
    color: #7f8c8d;
    font-size: 1.2em;
    max-width: 600px;
    margin: 0 auto;
    line-height: 1.6;
}}

.vlp-page-content {{
    background: white;
    padding: 40px;
    border-radius: 8px;
    box-shadow: 0 2px 10px rgba(0,0,0,0.1);
}}

.vlp-info-box {{
    background: #e8f4fd;
    border-left: 4px solid #3498db;
    padding: 20px;
    margin: 20px 0;
    border-radius: 4px;
}}

.vlp-warning-box {{
    background: #fff3cd;
    border-left: 4px solid #ffc107;
    padding: 20px;
    margin: 20px 0;
    border-radius: 4px;
}}

.vlp-success-box {{
    background: #d4edda;
    border-left: 4px solid #28a745;
    padding: 20px;
    margin: 20px 0;
    border-radius: 4px;
}}

.vlp-steps-list {{
    background: #f8f9fa;
    padding: 30px;
    border-radius: 8px;
    margin: 30px 0;
}}

.vlp-steps-list ol {{
    counter-reset: step-counter;
    list-style: none;
    padding: 0;
}}

.vlp-steps-list ol li {{
    counter-increment: step-counter;
    margin: 20px 0;
    padding: 20px;
    background: white;
    border-radius: 6px;
    position: relative;
    padding-left: 60px;
    box-shadow: 0 2px 5px rgba(0,0,0,0.1);
}}

.vlp-steps-list ol li::before {{
    content: counter(step-counter);
    position: absolute;
    left: 20px;
    top: 20px;
    background: #3498db;
    color: white;
    width: 30px;
    height: 30px;
    border-radius: 50%;
    display: flex;
    align-items: center;
    justify-content: center;
    font-weight: bold;
    font-size: 14px;
}}

.vlp-code-example {{
    background: #2c3e50;
    color: #ecf0f1;
    padding: 20px;
    border-radius: 6px;
    font-family: 'Courier New', monospace;
    margin: 20px 0;
    overflow-x: auto;
}}

.vlp-shortcode-demo {{
    background: #f39c12;
    color: white;
    padding: 15px;
    border-radius: 4px;
    font-family: monospace;
    text-align: center;
    margin: 15px 0;
    font-weight: bold;
}}

@media (max-width: 768px) {{
    .vlp-page-title {{
        font-size: 2em;
    }}
    
    .vlp-page-content {{
        padding: 20px;
    }}
    
    .vlp-steps-list ol li {{
        padding-left: 20px;
    }}
    
    .vlp-steps-list ol li::before {{
        position: relative;
        left: 0;
        top: 0;
        margin-right: 15px;
        margin-bottom: 10px;
    }}
}}
</style>

<?php get_footer(); ?>
'''

    with open(filename, 'w', encoding='utf-8') as f:
        f.write(page_template)
    
    print(f"‚úÖ Page cr√©√©e: {filename}")

def main():
    """Fonction principale pour cr√©er toutes les pages"""
    
    # Cr√©er le dossier pages s'il n'existe pas
    pages_dir = "pages"
    if not os.path.exists(pages_dir):
        os.makedirs(pages_dir)
    
    print("üé¨ Cr√©ation des pages pour Video Library Protect")
    print("=" * 50)
    
    # 1. Page Biblioth√®que Vid√©o (automatiquement cr√©√©e par le plugin)
    video_library_content = '''
                <!-- Shortcode principal pour afficher la biblioth√®que vid√©o -->
                <div class="vlp-info-box">
                    <h3>üé• Votre Biblioth√®que Vid√©o</h3>
                    <p>Cette page affiche toutes vos vid√©os disponibles. Les vid√©os peuvent √™tre gratuites ou prot√©g√©es par des codes cadeaux.</p>
                </div>

                <!-- Shortcode de la biblioth√®que vid√©o -->
                [vlp_video_library]

                <div class="vlp-info-box">
                    <h4>üí° Fonctionnalit√©s disponibles :</h4>
                    <ul>
                        <li>üîç <strong>Recherche</strong> : Trouvez rapidement une vid√©o</li>
                        <li>üìÅ <strong>Filtres par cat√©gorie</strong> : Naviguez par th√®me</li>
                        <li>üîí <strong>Protection par codes</strong> : Acc√®s s√©curis√© aux contenus premium</li>
                        <li>üëÅÔ∏è <strong>Aper√ßus gratuits</strong> : D√©couvrez le contenu avant l'achat</li>
                        <li>üì± <strong>Design responsive</strong> : Fonctionne sur tous les appareils</li>
                    </ul>
                </div>

                <div class="vlp-success-box">
                    <p><strong>üéØ Astuce :</strong> Si vous avez des codes cadeaux, saisissez-les directement sur les vid√©os prot√©g√©es pour d√©bloquer l'acc√®s complet !</p>
                </div>
    '''

    create_page_file(
        f"{pages_dir}/page-video-library.php",
        "Biblioth√®que Vid√©o",
        video_library_content,
        "Page principale pour d√©couvrir et regarder toutes nos vid√©os"
    )

    # 2. Page Cat√©gories de Vid√©os
    categories_content = '''
                <!-- Shortcode pour afficher les cat√©gories -->
                <div class="vlp-info-box">
                    <h3>üìÅ Explorez nos Cat√©gories</h3>
                    <p>D√©couvrez nos vid√©os organis√©es par th√®mes et sujets. Chaque cat√©gorie peut avoir son propre niveau de protection.</p>
                </div>

                <!-- Shortcode des cat√©gories vid√©o -->
                [vlp_video_categories layout="grid" columns="3" show_count="true" show_protected="true"]

                <div class="vlp-steps-list">
                    <h4>üöÄ Comment naviguer dans les cat√©gories :</h4>
                    <ol>
                        <li>
                            <strong>Parcourez les cat√©gories</strong><br>
                            Chaque cat√©gorie affiche le nombre de vid√©os et son statut de protection
                        </li>
                        <li>
                            <strong>Identifiez les protections</strong><br>
                            L'ic√¥ne üîí indique qu'un code cadeau est requis pour acc√©der au contenu
                        </li>
                        <li>
                            <strong>Cliquez pour explorer</strong><br>
                            Acc√©dez directement aux vid√©os de la cat√©gorie qui vous int√©resse
                        </li>
                        <li>
                            <strong>Utilisez vos codes</strong><br>
                            Saisissez votre code cadeau pour d√©bloquer une cat√©gorie enti√®re
                        </li>
                    </ol>
                </div>

                <div class="vlp-warning-box">
                    <h4>üîë Codes Cadeaux Requis</h4>
                    <p>Certaines cat√©gories n√©cessitent un code cadeau valide. Une fois un code saisi, vous aurez acc√®s √† toutes les vid√©os de cette cat√©gorie !</p>
                </div>
    '''

    create_page_file(
        f"{pages_dir}/page-categories-videos.php",
        "Cat√©gories de Vid√©os",
        categories_content,
        "Naviguez dans nos vid√©os par cat√©gories th√©matiques"
    )

    # 3. Page de Contenu Prot√©g√© (exemple)
    protected_content = '''
                <div class="vlp-info-box">
                    <h3>üîí Contenu Exclusif</h3>
                    <p>Cette page d√©montre comment prot√©ger du contenu sp√©cifique avec des codes cadeaux personnalis√©s.</p>
                </div>

                <!-- Contenu prot√©g√© par codes sp√©cifiques -->
                [vlp_protected_content codes="VIP-ACCESS,PREMIUM-2024" message="Ce contenu exclusif n√©cessite un code VIP ou Premium." unlock_message="üéâ Bienvenue dans notre espace VIP !"]

                <h3>üåü Contenu Exclusif VIP</h3>
                <p>F√©licitations ! Vous avez d√©bloqu√© notre contenu exclusif.</p>

                <div class="vlp-success-box">
                    <h4>üéÅ Avantages VIP inclus :</h4>
                    <ul>
                        <li>‚ú® Acc√®s anticip√© aux nouvelles vid√©os</li>
                        <li>üé• Contenu bonus et coulisses</li>
                        <li>üí¨ Communaut√© priv√©e VIP</li>
                        <li>üìß Newsletter exclusive avec conseils priv√©s</li>
                        <li>üéØ Formations avanc√©es r√©serv√©es aux membres</li>
                    </ul>
                </div>

                <div class="vlp-code-example">
Codes accept√©s pour cette page :
- VIP-ACCESS (acc√®s illimit√©)
- PREMIUM-2024 (acc√®s premium annuel)
                </div>

                <!-- Autre section prot√©g√©e avec code diff√©rent -->
                [vlp_protected_content codes="MASTERCLASS-2024" message="Cette masterclass exclusive n√©cessite le code MASTERCLASS-2024"]

                <h3>üéì Masterclass Exclusive</h3>
                <p>Cette formation approfondie vous donnera les cl√©s pour ma√Ætriser [votre sujet].</p>

                <video controls width="100%">
                    <source src="/path/to/exclusive-masterclass.mp4" type="video/mp4">
                    Votre navigateur ne supporte pas la lecture vid√©o.
                </video>

                [/vlp_protected_content]

                [/vlp_protected_content]

                <div class="vlp-info-box">
                    <h4>üõ°Ô∏è Comment fonctionne la protection :</h4>
                    <p>Le shortcode <code>[vlp_protected_content]</code> permet de prot√©ger n'importe quel contenu avec des codes sp√©cifiques. 
                    Seuls les utilisateurs ayant saisi un code valide peuvent voir le contenu √† l'int√©rieur.</p>
                </div>
    '''

    create_page_file(
        f"{pages_dir}/page-contenu-protege-exemple.php",
        "Contenu Prot√©g√© - Exemple",
        protected_content,
        "Exemple de page avec du contenu prot√©g√© par codes cadeaux"
    )

    # 4. Page Aide/Support Vid√©o
    help_content = '''
                <div class="vlp-info-box">
                    <h3>‚ùì Centre d'Aide - Video Library Protect</h3>
                    <p>Trouvez rapidement les r√©ponses √† vos questions sur l'utilisation de notre biblioth√®que vid√©o et des codes cadeaux.</p>
                </div>

                <div class="vlp-steps-list">
                    <h4>üöÄ Guide de d√©marrage rapide :</h4>
                    <ol>
                        <li>
                            <strong>D√©couvrez la biblioth√®que</strong><br>
                            Rendez-vous sur la <a href="/video-library/">page de la biblioth√®que vid√©o</a> pour voir toutes les vid√©os disponibles
                        </li>
                        <li>
                            <strong>Explorez les cat√©gories</strong><br>
                            Naviguez par th√®me sur la <a href="/categories-videos/">page des cat√©gories</a>
                        </li>
                        <li>
                            <strong>Regardez les aper√ßus gratuits</strong><br>
                            Toutes les vid√©os ont un aper√ßu gratuit pour vous aider √† choisir
                        </li>
                        <li>
                            <strong>Utilisez vos codes cadeaux</strong><br>
                            Saisissez votre code pour d√©bloquer la vid√©o compl√®te ou une cat√©gorie enti√®re
                        </li>
                    </ol>
                </div>

                <h3>üîë Utilisation des Codes Cadeaux</h3>

                <div class="vlp-warning-box">
                    <h4>Format des codes :</h4>
                    <ul>
                        <li>Entre 3 et 50 caract√®res</li>
                        <li>Lettres, chiffres et tirets autoris√©s</li>
                        <li>Pas de distinction majuscules/minuscules</li>
                        <li>Exemples : <code>NOEL2024</code>, <code>promo-hiver</code>, <code>VIP-ACCESS</code></li>
                    </ul>
                </div>

                <div class="vlp-steps-list">
                    <h4>üìù Comment saisir un code cadeau :</h4>
                    <ol>
                        <li>
                            <strong>Sur une vid√©o prot√©g√©e</strong><br>
                            Cliquez sur la vid√©o, puis saisissez votre code dans le formulaire qui appara√Æt
                        </li>
                        <li>
                            <strong>Pour une cat√©gorie enti√®re</strong><br>
                            Le code vous donnera acc√®s √† toutes les vid√©os de cette cat√©gorie
                        </li>
                        <li>
                            <strong>Sur du contenu sp√©cifique</strong><br>
                            Certaines pages ont du contenu prot√©g√© par des codes particuliers
                        </li>
                        <li>
                            <strong>Acc√®s site entier</strong><br>
                            Certains codes premium donnent acc√®s √† l'ensemble du site
                        </li>
                    </ol>
                </div>

                <h3>üé• Types de Protection</h3>

                <div class="vlp-info-box">
                    <h4>üÜì Vid√©os gratuites</h4>
                    <p>Acc√®s imm√©diat et complet √† la vid√©o, sans code requis.</p>
                </div>

                <div class="vlp-warning-box">
                    <h4>üîí Vid√©os prot√©g√©es individuellement</h4>
                    <p>Chaque vid√©o a ses propres codes d'acc√®s. L'aper√ßu est gratuit, la vid√©o compl√®te n√©cessite un code.</p>
                </div>

                <div class="vlp-warning-box">
                    <h4>üìÅ Cat√©gories prot√©g√©es</h4>
                    <p>Un seul code donne acc√®s √† toutes les vid√©os de la cat√©gorie.</p>
                </div>

                <div class="vlp-warning-box">
                    <h4>üåê Protection site entier</h4>
                    <p>Certains codes premium donnent acc√®s √† l'int√©gralit√© du contenu du site.</p>
                </div>

                <h3>üõ†Ô∏è R√©solution de probl√®mes</h3>

                <div class="vlp-steps-list">
                    <h4>‚ùå Probl√®mes courants et solutions :</h4>
                    <ol>
                        <li>
                            <strong>"Code invalide"</strong><br>
                            ‚úÖ V√©rifiez l'orthographe et les espaces<br>
                            ‚úÖ Assurez-vous que le code n'est pas expir√©<br>
                            ‚úÖ Contactez-nous si le probl√®me persiste
                        </li>
                        <li>
                            <strong>"La vid√©o ne se charge pas"</strong><br>
                            ‚úÖ V√©rifiez votre connexion internet<br>
                            ‚úÖ Essayez de rafra√Æchir la page<br>
                            ‚úÖ D√©sactivez temporairement les bloqueurs de publicit√©
                        </li>
                        <li>
                            <strong>"J'ai perdu mon code"</strong><br>
                            ‚úÖ V√©rifiez vos emails de confirmation<br>
                            ‚úÖ Consultez votre compte utilisateur<br>
                            ‚úÖ Contactez notre support client
                        </li>
                        <li>
                            <strong>"Le code ne fonctionne pas sur cette vid√©o"</strong><br>
                            ‚úÖ V√©rifiez que le code correspond bien √† cette vid√©o<br>
                            ‚úÖ Certains codes sont sp√©cifiques √† des cat√©gories<br>
                            ‚úÖ Les codes site-wide fonctionnent partout
                        </li>
                    </ol>
                </div>

                <h3>üéØ Shortcodes Disponibles</h3>

                <div class="vlp-code-example">
                    <h4>Pour les d√©veloppeurs et administrateurs :</h4>

                    <!-- Biblioth√®que compl√®te -->
                    [vlp_video_library]
                    
                    <!-- Biblioth√®que avec options -->
                    [vlp_video_library category="formation" limit="8" columns="4" layout="grid"]
                    
                    <!-- Cat√©gories uniquement -->
                    [vlp_video_categories layout="grid" show_count="true"]
                    
                    <!-- Vid√©o sp√©cifique -->
                    [vlp_single_video id="123" autoplay="false" show_info="true"]
                    [vlp_single_video slug="ma-video" width="100%" show_related="true"]
                    
                    <!-- Contenu prot√©g√© -->
                    [vlp_protected_content codes="CODE1,CODE2"]Contenu secret[/vlp_protected_content]
                </div>

                <h3>üìû Besoin d'aide suppl√©mentaire ?</h3>

                <div class="vlp-success-box">
                    <h4>üí¨ Contactez-nous :</h4>
                    <ul>
                        <li>üìß <strong>Email :</strong> support@votresite.com</li>
                        <li>üí¨ <strong>Chat en direct :</strong> Disponible 9h-18h</li>
                        <li>üì± <strong>T√©l√©phone :</strong> +33 1 23 45 67 89</li>
                        <li>üé´ <strong>Syst√®me de tickets :</strong> <a href="/support/">Cr√©er un ticket</a></li>
                    </ul>
                    <p><strong>‚è∞ Temps de r√©ponse moyen :</strong> Moins de 2 heures en semaine</p>
                </div>

                <div class="vlp-info-box">
                    <h4>üìö Ressources utiles :</h4>
                    <ul>
                        <li><a href="/video-library/">üé• Biblioth√®que Vid√©o</a></li>
                        <li><a href="/categories-videos/">üìÅ Cat√©gories de Vid√©os</a></li>
                        <li><a href="/mon-compte/">üë§ Mon Compte</a></li>
                        <li><a href="/faq/">‚ùì FAQ Compl√®te</a></li>
                    </ul>
                </div>
    '''

    create_page_file(
        f"{pages_dir}/page-aide-support-video.php",
        "Aide & Support Vid√©o",
        help_content,
        "Guide complet pour utiliser la biblioth√®que vid√©o et les codes cadeaux"
    )

    # 5. Page d'installation/documentation pour les d√©veloppeurs
    installation_content = '''
                <div class="vlp-info-box">
                    <h3>üîß Installation et Configuration</h3>
                    <p>Guide technique pour les d√©veloppeurs et administrateurs WordPress.</p>
                </div>

                <div class="vlp-steps-list">
                    <h4>‚öôÔ∏è Installation du plugin :</h4>
                    <ol>
                        <li>
                            <strong>T√©l√©chargement</strong><br>
                            T√©l√©chargez le plugin Video Library Protect depuis votre espace client
                        </li>
                        <li>
                            <strong>Installation WordPress</strong><br>
                            Allez dans Extensions > Ajouter > T√©l√©verser et s√©lectionnez le fichier ZIP
                        </li>
                        <li>
                            <strong>Activation</strong><br>
                            Activez le plugin depuis la liste des extensions
                        </li>
                        <li>
                            <strong>Configuration initiale</strong><br>
                            Le plugin cr√©√© automatiquement les tables et la page biblioth√®que
                        </li>
                    </ol>
                </div>

                <h3>üìÅ Structure des Pages Cr√©√©es</h3>

                <div class="vlp-code-example">
/video-library/                 ‚Üí [vlp_video_library]
/categories-videos/             ‚Üí [vlp_video_categories]
/aide-support-video/           ‚Üí Documentation compl√®te
/contenu-protege-exemple/      ‚Üí Exemple de protection
</div>

                <div class="vlp-steps-list">
                    <h4>üéØ Configuration recommand√©e :</h4>
                    <ol>
                        <li>
                            <strong>Int√©gration GiftCode Protect</strong><br>
                            Installez et activez le plugin GiftCode Protect v2 pour la gestion des codes
                        </li>
                        <li>
                            <strong>Configuration Bunny Stream (optionnel)</strong><br>
                            Configurez vos cl√©s API Bunny pour la diffusion vid√©o optimis√©e
                        </li>
                        <li>
                            <strong>Presto Player (optionnel)</strong><br>
                            Installez Presto Player pour un lecteur vid√©o avanc√©
                        </li>
                        <li>
                            <strong>Personnalisation CSS</strong><br>
                            Adaptez les styles dans votre th√®me ou via le customizer
                        </li>
                    </ol>
                </div>

                <h3>üé® Personnalisation</h3>

                <div class="vlp-code-example">
/* CSS pour personnaliser l'apparence */
.vlp-video-library {
    /* Styles de la biblioth√®que */
}

.vlp-video-card {
    /* Styles des cartes vid√©o */
}

.vlp-unlock-form {
    /* Styles des formulaires de d√©verrouillage */
}
</div>

                <div class="vlp-warning-box">
                    <h4>‚ö†Ô∏è Pr√©requis techniques :</h4>
                    <ul>
                        <li>WordPress 5.0+</li>
                        <li>PHP 7.4+</li>
                        <li>MySQL 5.6+</li>
                        <li>Plugin GiftCode Protect v2 (recommand√©)</li>
                        <li>HTTPS activ√© (pour la s√©curit√© des codes)</li>
                    </ul>
                </div>

                <h3>üîå Int√©grations Disponibles</h3>

                <div class="vlp-success-box">
                    <h4>‚úÖ Plugins support√©s :</h4>
                    <ul>
                        <li><strong>GiftCode Protect v2</strong> - Gestion des codes cadeaux</li>
                        <li><strong>Bunny Stream</strong> - Diffusion vid√©o optimis√©e</li>
                        <li><strong>Presto Player</strong> - Lecteur vid√©o avanc√©</li>
                        <li><strong>WooCommerce</strong> - Vente de codes d'acc√®s</li>
                    </ul>
                </div>

                <div class="vlp-info-box">
                    <p><strong>üí° Conseil :</strong> Ces pages sont des templates de base. Personnalisez-les selon vos besoins et votre identit√© visuelle !</p>
                </div>
    '''

    create_page_file(
        f"{pages_dir}/page-installation-configuration.php",
        "Installation & Configuration",
        installation_content,
        "Guide technique d'installation et de configuration du syst√®me"
    )

    print("\n" + "=" * 50)
    print("‚úÖ PAGES CR√â√âES AVEC SUCC√àS!")
    print("=" * 50)
    print(f"üìÅ Toutes les pages ont √©t√© cr√©√©es dans le dossier: {pages_dir}/")
    print("\nüöÄ Prochaines √©tapes:")
    print("1. Copiez ces fichiers dans votre th√®me WordPress")
    print("2. Ou int√©grez le contenu dans vos pages via l'admin WordPress")
    print("3. Personnalisez le CSS selon votre design")
    print("4. Testez les shortcodes avec des vid√©os de test")
    print("\nüí° Les shortcodes utilis√©s:")
    print("- [vlp_video_library] ‚Üí Biblioth√®que compl√®te")
    print("- [vlp_video_categories] ‚Üí Navigation par cat√©gories")  
    print("- [vlp_protected_content] ‚Üí Contenu prot√©g√© par codes")
    print("- [vlp_single_video] ‚Üí Vid√©o individuelle")

if __name__ == "__main__":
    main()